<!DOCTYPE html>
<html>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
	integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	
	<!-------------------------- Style goes here -------------------------->
	
<style type ="text/css" >
  .error{
    color: red;
  }
  .table{
    max-width: 95%;
    margin-left: 2.5%;
  }
</style>

	<!-------------------------- All javascript scripting goes here -------------------------->
	
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
<!--

	var acceptFriend = function(index) {
	
		var id = 'acceptfriend_' + index
		$.post('/acceptfriend', { username: document.getElementById(id).value });
		
		id = '#acceptfriendbutton_' + index
		$(id).html('<p style="color:green;">Friend Request Accepted</p>');
		
		id = '#denyfriendbutton_' + index
		$(id).html('');
	}
	
	var denyFriend = function(index) {
	
		var id = 'denyfriend_' + index
		$.post('/denyfriend', { username: document.getElementById(id).value });
		
		id = '#acceptfriendbutton_' + index
		$(id).html('<p style="color:red;">Friend Request Denied</p>');
		
		id = '#denyfriendbutton_' + index
		$(id).html('');
	}
	
// -->
</script>

	<!-------------------------- The main body goes here -------------------------->
	
<body>
  <% if(errMessage != null){ %>
    <p class="error"><%= errMessage %></p>
  <% } %>
  <br>
  <h1>Friend Requests:</h1>
  <% if (requests.length > 0) { %>
	  <table class="table">
		  <thead class="thead-dark">
		    <tr>
		      <th scope="col">First Name:</th>
		      <th scope="col">Last name:</th>
		      <th scope="col">Username:</th>
		      <th scope="col">Online:</th>
		      <th scope="col"></th>
		      <th scope="col"></th>
		    </tr>
		  </thead>
		  <tbody>
		  	<% for (var i = 0; i < requests.length; i++) { %>
		  		<tr>
			      <td><%= requests[i] %></td>
			      <td><%= requests[i] %></td>
			      <td><%= requests[i] %></td>
			      <td>Offline</td>
			      <td>
			      	<form action="javascript:acceptFriend(<%= i %>)" id="acceptfriendbutton_<%= i %>">
						<button type="submit" name="username", id="acceptfriend_<%= i %>" value=<%= requests[i] %> class="btn-link">Accept Friend</button>
					</form>
			      </td>
			      <td>
			      	<form action="/denyfriend" method="post"><form action="javascript:denyFriend(<%= i %>)" id="denyfriendbutton_<%= i %>">
						<button type="submit" name="username", id="denyfriend_<%= i %>" value=<%= requests[i] %> class="btn-link">Deny Friend</button>
					</form>
			      </td>
			    </tr>
		  	<% } %>
		  </tbody>
		</table>
	<% } else { %>
		<p>You have no friend requests are the moment.</p>
	<% } %>

</body>
</html>
